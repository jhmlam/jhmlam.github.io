<!DOCTYPE html>
<html lang="en">
<head>

  <!-- Basic Page Needs
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <meta charset="utf-8">
  <title>{{ site.data.main_info.name }} | {{ page.title }}</title>
  <meta name="description" content="Martin Saveski">
  <meta name="author" content="Martin Saveski">
  <meta property="og:title" content="Martin Saveski" />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="http://www.martinsaveski.com" />
  <meta property="og:site_name" content="Martin Saveski" />
  <link rel="canonical" href="http://www.martinsaveski.com" />

  <!-- Mobile Specific Metas
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- FONT
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <link href='https://fonts.googleapis.com/css?family=Raleway:400,300,600' rel='stylesheet' type='text/css'>

  <!-- CSS
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <link rel="stylesheet" href={{ "/libs/external/skeleton/normalize.css" | prepend: site.baseurl }}>
  <link rel="stylesheet" href={{ "/libs/external/skeleton/skeleton.css" | prepend: site.baseurl }}>
  <link rel="stylesheet" href={{ "/libs/custom/my_css.css" | prepend: site.baseurl }}>

  <!-- JQuery
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <script src={{ "/libs/external/jquery-3.1.1.min.js" | prepend: site.baseurl }}></script>

  <!-- Font-Awesome
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <link rel="stylesheet" href={{ "/libs/external/font-awesome-4.7.0/css/font-awesome.min.css" | prepend: site.baseurl }}>

  <!-- Academicons
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <link rel="stylesheet" href={{ "/libs/external/academicons-1.8.6/css/academicons.min.css" | prepend: site.baseurl }}>

  <!-- Skeleton tabs
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <link rel="stylesheet" href={{ "/libs/external/skeleton_tabs/skeleton-tabs.css" | prepend: site.baseurl }}>
  <script src={{ "/libs/external/skeleton_tabs/skeleton-tabs.js" | prepend: site.baseurl }}></script>

  <!-- Timeline
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <link rel="stylesheet" href={{ "/libs/external/timeline.css" | prepend: site.baseurl }}>

  <!-- Scripts
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <!--<link rel="stylesheet" href={{ "/libs/external/github-prettify-theme.css" | prepend: site.baseurl }}>-->
  <script src={{ "/libs/custom/my_js.js" | prepend: site.baseurl }}></script>

  <!-- Favicon
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <link rel="icon" type="image/png" href={{ "/libs/icon.png" | prepend: site.baseurl }}>
  <link rel="shortcut icon" type="image/png" href={{ "/libs/icon.png" | prepend: site.baseurl }}>




  <style>
    /* CSS for blur effect */
    .blur-effect {
        filter: blur(2px);
    }
  </style>

</head>
<body>

  <!-- Primary Page Layout
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <div class="container">

    <section class="header">
      <div class="row">
        <div class="three columns">
          <a href="{{ site.baseurl }}/"><img class="u-max-full-width" src='{{ site.baseurl }}{{ site.data.main_info.profile_pic }}'></a>
        </div>
        <div class="nine columns main-description">
            <h1>{{ site.data.main_info.name }}</h1>
            <p>{{ site.data.main_info.title }}</p>
            <p>{{ site.data.main_info.email }}</p>
            <p>
              <span onclick="window.open('{{ site.data.main_info.twitter }}')" style="cursor: pointer">
                <i class="fa fa-twitter" aria-hidden="true"></i>
              </span>

              <span onclick="window.open('{{ site.data.main_info.linkedin }}')" style="cursor: pointer">
                <i class="fa fa-linkedin-square" aria-hidden="true"></i>
              </span>

              <span onclick="window.open('{{ site.data.main_info.github }}')" style="cursor: pointer">
                <i class="fa fa-github" aria-hidden="true"></i>
              </span>

              <span onclick="window.open('{{ site.data.main_info.google_scholar }}')" style="cursor: pointer">
                <i class="ai ai-google-scholar ai-lg" aria-hidden="true"></i>
              </span>


            </p>
        </div>
        <div style="text-align: right; padding-top: 20px;">
          <button id="toggleFloatersBtn">My View of the World (with Floaters!)</button>
        </div>
      </div>
    </section>

    <div class="navbar-spacer"></div>
    <nav class="navbar">
      <div class="container">
        <ul class="navbar-list">
          <li class="navbar-item"><a class="navbar-link" href={{ "/index.html#bio" | prepend: site.baseurl }}>Bio</a></li>
          <!--<li class="navbar-item"><a class="navbar-link" href={{ "/index.html#prospective-students" | prepend: site.baseurl }}>Prospective Students</a></li>-->
          <li class="navbar-item"><a class="navbar-link" href={{ "/index.html#publications" | prepend: site.baseurl }}>Publications</a></li>
          <!--<li class="navbar-item"><a class="navbar-link" href={{ "/index.html#projects" | prepend: site.baseurl }}>Projects</a></li>-->
          <li class="navbar-item"><a class="navbar-link" href={{ "/index.html#resume" | prepend: site.baseurl }}>Vita</a></li>
        </ul>
      </div>
    </nav>

    {{ content}}

    <div class="footer">
      <div class="row">
        <div class="four columns">
          {{ site.data.main_info.name }}
        </div>
        <div class="four columns">
          {{ site.data.main_info.email }}
        </div>
        <div class="four columns">
          <span onclick="window.open('{{ site.data.main_info.twitter }}')" style="cursor: pointer">
            <i class="fa fa-twitter" aria-hidden="true"></i>
          </span>
          <span onclick="window.open('{{ site.data.main_info.linkedin }}')" style="cursor: pointer">
            <i class="fa fa-linkedin-square" aria-hidden="true"></i>
          </span>
          <span onclick="window.open('{{ site.data.main_info.github }}')" style="cursor: pointer">
            <i class="fa fa-github" aria-hidden="true"></i>
          </span>
          <span onclick="window.open('{{ site.data.main_info.google_scholar }}')" style="cursor: pointer">
            <i class="ai ai-google-scholar ai-lg" aria-hidden="true"></i>
          </span>
        </div>
      </div>
    </div>

  </div>





  <!-- Floaters haha-->

  <!-- Floater Canvas -->
  <canvas id="floaterCanvas" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 9999;"></canvas>

  <!-- Floater Script with Toggle Feature -->
  <script>

    let viewState = 0; // 0: normal, 1: floaters, 2: floaters + myopia

    document.getElementById('toggleFloatersBtn').addEventListener('click', function() {
    const button = document.getElementById('toggleFloatersBtn');
    const body = document.body; // Or any specific element you want to apply the blur to

    if (viewState === 0) { // Normal to Floaters
        // Activate floaters here
        button.innerText = "Floaters + Myopia!";
        viewState = 1;
    } else if (viewState === 1) { // Floaters to Floaters + Myopia (Blur)
        // Activate blur here on top of floaters
        body.classList.add("blur-effect"); // Ensure this class applies a blur in your CSS
        button.innerText = "Return Normal Vision";
        viewState = 2;
    } else { // Return to Normal
        // Deactivate floaters and blur
        body.classList.remove("blur-effect");
        button.innerText = "My View of the World (with Floaters!)";
        viewState = 0;
    }
    });

    const canvas = document.getElementById('floaterCanvas');
    const ctx = canvas.getContext('2d');
    let animationFrameId = null;

    function resizeCanvas() {
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
    }
    window.addEventListener('resize', resizeCanvas, false);
    resizeCanvas();

    function createFloater() {
        return {
            x: Math.random() * canvas.width,
            y: Math.random() * canvas.height,
            length: Math.random() * 75 + 25,
            angle: Math.random() * Math.PI * 2,
            speedX: (Math.random() * 2 - 1) * 0.5,
            speedY: (Math.random() * 2 - 1) * 0.5,
            repelSpeed: Math.random() * 0.5 + 0.5
        };
    }

    function drawFloaters() {
        let floaters = Array.from({length: 30}, createFloater);

        function repelFloaters(floaterA, floaterB) {
            const dx = floaterA.x - floaterB.x;
            const dy = floaterA.y - floaterB.y;
            const distance = Math.sqrt(dx * dx + dy * dy);

            if (distance < 50) {
                const repelForce = 1 - (distance / 50);
                floaterA.speedX += (dx / distance) * repelForce * floaterA.repelSpeed;
                floaterA.speedY += (dy / distance) * repelForce * floaterA.repelSpeed;
                floaterB.speedX -= (dx / distance) * repelForce * floaterB.repelSpeed;
                floaterB.speedY -= (dy / distance) * repelForce * floaterB.repelSpeed;
            }
        }

        function updateAndDraw() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            for (let i = 0; i < floaters.length; i++) {
                for (let j = i + 1; j < floaters.length; j++) {
                    repelFloaters(floaters[i], floaters[j]);
                }
            }
            floaters.forEach(floater => {
                floater.x += floater.speedX;
                floater.y += floater.speedY;

                if (floater.x > canvas.width) floater.x = 0;
                if (floater.x < 0) floater.x = canvas.width;
                if (floater.y > canvas.height) floater.y = 0;
                if (floater.y < 0) floater.y = canvas.height;

                ctx.beginPath();
                ctx.moveTo(floater.x, floater.y);
                ctx.lineTo(floater.x + floater.length * Math.cos(floater.angle), floater.y + floater.length * Math.sin(floater.angle));
                ctx.strokeStyle = 'rgba(0, 0, 0, 0.2)';
                ctx.lineWidth = 2;
                ctx.stroke();
            });

            animationFrameId = requestAnimationFrame(updateAndDraw);
        }

        updateAndDraw();
    }

    document.getElementById('toggleFloatersBtn').addEventListener('click', function() {
        if (canvas.style.display === 'none') {
            canvas.style.display = 'block';
            drawFloaters();
        } else {
            canvas.style.display = 'none';
            if (animationFrameId) {
                cancelAnimationFrame(animationFrameId);
                ctx.clearRect(0, 0, canvas.width, canvas.height);
            }
        }
    });
  </script>



  <!-- Google Analytics -->
  {% include google_analytics.html %}

  <!-- do not remove -->
  <span id="62cd7b7da1aff3196fdc26b60e396df9"></span>

<!-- End Document
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
</body>
</html>
